<!DOCTYPE html>
<html lang="th">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Document Scanner</title>
  <script src="https://cdn.jsdelivr.net/npm/@scanbot/web-sdk@5.0.1-rc.1/dist/scanbot-web-sdk.js"></script>
  <style>
    body { font-family: 'Sarabun', sans-serif; text-align: center; background: #f5f5f5; padding: 20px; }
    canvas { border: 1px solid #555; margin-top: 10px; max-width: 100%; border-radius: 8px; }
    input { margin: 10px; padding: 10px 20px; font-size: 16px; border-radius: 6px; }
  </style>
</head>
<body>
  <h2>üìÑ Smart Document Scanner</h2>
  <p>‡∏ñ‡πà‡∏≤‡∏¢‡∏£‡∏π‡∏õ‡πÄ‡∏≠‡∏Å‡∏™‡∏≤‡∏£ ‚Üí ‡∏Ñ‡∏£‡∏≠‡∏õ‡∏≠‡∏±‡∏ï‡πÇ‡∏ô‡∏°‡∏±‡∏ï‡∏¥ ‚Üí ‡∏û‡∏£‡∏µ‡∏ß‡∏¥‡∏ß‡∏ó‡∏±‡∏ô‡∏ó‡∏µ</p>
  <input type="file" accept="image/*" capture="environment" id="cameraInput">
  <br>
  <canvas id="canvas"></canvas>

  <script>
    const canvas = document.getElementById('canvas');
    const ctx = canvas.getContext('2d');

    const scanner = new ScanbotWebSdk.DocumentScanner({
      licenseKey: 'YOUR_LICENSE_KEY', // ‡πÉ‡∏™‡πà License Key ‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì‡∏ó‡∏µ‡πà‡∏ô‡∏µ‡πà
      containerId: 'canvas',
      ui: {
        showCaptureButton: true,
        showRetakeButton: true,
        showUseScanButton: true,
        showFlashButton: true,
        showFilters: true,
        showRotateButton: true,
        showResetButton: true,
        showExportButton: true,
        showMultiPageButton: true,
        showCloseButton: true,
        showHelpButton: true,
        showImageGalleryButton: true,
        showImageGallery: true,
        showGuidelines: true,
        showGrid: true,
        showScannerFrame: true,
        showCaptureFeedback: true,
        showOverlay: true,
        showCameraPreview: true,
        showCapturePreview: true
      }
    });

    document.getElementById('cameraInput').addEventListener('change', e => {
      if (e.target.files.length > 0) {
        const file = e.target.files[0];
        const img = new Image();
        img.onload = () => {
          processDocument(img);
        };
        img.src = URL.createObjectURL(file);
      }
    });

    function processDocument(img) {
      canvas.width = img.width;
      canvas.height = img.height;
      ctx.drawImage(img, 0, 0, img.width, img.height);

      const imageData = ctx.getImageData(0, 0, canvas.width, canvas.height);
      const data = imageData.data;

      let minX = canvas.width, minY = canvas.height, maxX = 0, maxY = 0;

      for (let y = 0; y < canvas.height; y++) {
        for (let x = 0; x < canvas.width; x++) {
          const i = (y * canvas.width + x) * 4;
          const r = data[i], g = data[i + 1], b = data[i + 2];
          const brightness = (r + g + b) / 3;
          if (brightness < 200) { // ‡∏õ‡∏£‡∏±‡∏ö threshold
            if (x < minX) minX = x;
            if (x > maxX) maxX = x;
            if (y < minY) minY = y;
            if (y > maxY) maxY = y;
          }
        }
      }

      const width = maxX - minX;
      const height = maxY - minY;

      const cropped = ctx.getImageData(minX, minY, width, height);
      canvas.width = width;
      canvas.height = height;
      ctx.putImageData(cropped, 0, 0);
    }
  </script>
</body>
</html>
