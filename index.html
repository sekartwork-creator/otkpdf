<!DOCTYPE html>
<html lang="th">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Smart Document Scanner</title>
<script src="https://cdn.jsdelivr.net/npm/@scanbot/web-sdk@5.0.1-rc.1/dist/scanbot-web-sdk.js"></script>
<style>
  body { font-family:'Sarabun',sans-serif; text-align:center; background:#f5f5f5; padding:20px; }
  #preview { display:flex; flex-wrap:wrap; justify-content:center; gap:10px; margin-top:15px; }
  .page { width:200px; border:1px solid #ccc; border-radius:6px; }
  button { padding:10px 20px; font-size:16px; margin:10px; border-radius:6px; }
</style>
</head>
<body>
<h2>üìÑ Smart Document Scanner</h2>
<p>‡∏ñ‡πà‡∏≤‡∏¢‡πÄ‡∏≠‡∏Å‡∏™‡∏≤‡∏£ ‚Üí ‡∏Ñ‡∏£‡∏≠‡∏õ‡∏â‡∏•‡∏≤‡∏î ‚Üí ‡∏û‡∏£‡∏µ‡∏ß‡∏¥‡∏ß ‚Üí Export PDF</p>

<button id="capture">‡∏ñ‡πà‡∏≤‡∏¢‡πÄ‡∏≠‡∏Å‡∏™‡∏≤‡∏£</button>
<button id="export">Export PDF</button>

<div id="preview"></div>

<script>
let pages = [];

async function initScanbot() {
  window.scanbotSDK = await ScanbotSDK.Initialize({
    licenseKey: "YOUR_LICENSE_KEY", // ‡πÉ‡∏™‡πà License Key ‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì
    engine: { loadMode: "remote" }
  });
}

async function captureDocument() {
  try {
    const result = await scanbotSDK.UI.startDocumentScanner({
      multiPage: false, // ‡∏ñ‡πâ‡∏≤‡∏≠‡∏¢‡∏≤‡∏Å‡∏ñ‡πà‡∏≤‡∏¢‡∏´‡∏•‡∏≤‡∏¢‡∏´‡∏ô‡πâ‡∏≤‡∏Ñ‡∏£‡∏≤‡∏ß‡πÄ‡∏î‡∏µ‡∏¢‡∏ß
      showGallery: true,
      showTorch: true
    });

    if(result && result.page) {
      pages.push(result.page);
      showPreview();
    }
  } catch(e) { console.error(e); alert("‡∏ñ‡πà‡∏≤‡∏¢‡πÄ‡∏≠‡∏Å‡∏™‡∏≤‡∏£‡∏•‡πâ‡∏°‡πÄ‡∏´‡∏•‡∏ß"); }
}

function showPreview() {
  const preview = document.getElementById('preview');
  preview.innerHTML = "";
  pages.forEach((page,i)=>{
    const img = document.createElement('img');
    img.src = page.originalImageFileUri || page.processedImageFileUri;
    img.className = "page";
    preview.appendChild(img);
  });
}

async function exportPDF() {
  if(pages.length===0){ alert("‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡∏°‡∏µ‡πÄ‡∏≠‡∏Å‡∏™‡∏≤‡∏£"); return; }
  try {
    const pdfFile = await scanbotSDK.createPdf({
      pageFileUris: pages.map(p=>p.processedImageFileUri)
    });
    const link = document.createElement('a');
    link.href = pdfFile.fileUri;
    link.download = "document.pdf";
    link.click();
  } catch(e){ console.error(e); alert("Export PDF ‡∏•‡πâ‡∏°‡πÄ‡∏´‡∏•‡∏ß"); }
}

document.getElementById('capture').addEventListener('click', captureDocument);
document.getElementById('export').addEventListener('click', exportPDF);

initScanbot();
</script>
</body>
</html>
